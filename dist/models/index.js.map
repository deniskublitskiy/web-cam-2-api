{"version":3,"sources":["models/index.js"],"names":["knex","require","development","bookshelf","save","Model","prototype","args","apply","then","id","model","clear","set","refresh","plugin","Message","User","Chat","TestType","Users","Collection","extend","Messages","Chats","TestTypes","module","exports"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,MAAR,EAAgBA,QAAQ,gBAAR,EAA0BC,WAA1C,CAAb;AACA,IAAMC,YAAYF,QAAQ,WAAR,EAAqBD,IAArB,CAAlB;;AAEA,IAAII,OAAOD,UAAUE,KAAV,CAAgBC,SAAhB,CAA0BF,IAArC;AACAD,UAAUE,KAAV,CAAgBC,SAAhB,CAA0BF,IAA1B,GAAiC,YAAmB;AAAA,sCAANG,IAAM;AAANA,YAAM;AAAA;;AAChD,WAAOH,KAAKI,KAAL,CAAW,IAAX,EAAiBD,IAAjB,EAAuBE,IAAvB,CAA4B,iBAAS;AAAA,YACnCC,EADmC,GAC7BC,KAD6B,CACnCD,EADmC;;AAExC,eAAOC,QACDA,MAAMC,KAAN,GAAcC,GAAd,CAAkB,IAAlB,EAAwBH,EAAxB,EAA4BI,OAA5B,EADC,GAEDH,KAFN;AAGH,KALM,CAAP;AAMH,CAPD;;AASAR,UAAUY,MAAV,CAAiB,CAAC,YAAD,EAAe,UAAf,EAA2B,qBAA3B,EAAkD,UAAlD,CAAjB;;AAEA,IAAMC,UAAUf,QAAQ,WAAR,EAAqBE,SAArB,CAAhB;AACA,IAAMc,OAAOhB,QAAQ,QAAR,EAAkBE,SAAlB,CAAb;AACA,IAAMe,OAAOjB,QAAQ,QAAR,EAAkBE,SAAlB,CAAb;AACA,IAAMgB,WAAWlB,QAAQ,YAAR,EAAsBE,SAAtB,CAAjB;;AAEA,IAAMiB,QAAQjB,UAAUkB,UAAV,CAAqBC,MAArB,CAA4B;AACtCX,WAAOM;AAD+B,CAA5B,CAAd;;AAIA,IAAMM,WAAWpB,UAAUkB,UAAV,CAAqBC,MAArB,CAA4B;AACzCX,WAAOY;AADkC,CAA5B,CAAjB;;AAIA,IAAMC,QAAQrB,UAAUkB,UAAV,CAAqBC,MAArB,CAA4B;AACtCX,WAAOa;AAD+B,CAA5B,CAAd;;AAIA,IAAMC,YAAYtB,UAAUkB,UAAV,CAAqBC,MAArB,CAA4B;AAC1CX,WAAOQ;AADmC,CAA5B,CAAlB;;AAIAO,OAAOC,OAAP,GAAiB;AACbX,oBADa;AAEbO,sBAFa;AAGbN,cAHa;AAIbG,gBAJa;AAKbF,cALa;AAMbM,gBANa;AAObL,sBAPa;AAQbM;AARa,CAAjB","file":"index.js","sourcesContent":["const knex = require('knex')(require('../../knexfile').development);\r\nconst bookshelf = require('bookshelf')(knex);\r\n\r\nlet save = bookshelf.Model.prototype.save;\r\nbookshelf.Model.prototype.save = function (...args) {\r\n    return save.apply(this, args).then(model => {\r\n        let {id} = model;\r\n        return model\r\n            ? model.clear().set('id', id).refresh()\r\n            : model\r\n    });\r\n};\r\n\r\nbookshelf.plugin(['visibility', 'virtuals', 'bookshelf-camelcase', 'registry']);\r\n\r\nconst Message = require('./Message')(bookshelf);\r\nconst User = require('./User')(bookshelf);\r\nconst Chat = require('./Chat')(bookshelf);\r\nconst TestType = require('./TestType')(bookshelf);\r\n\r\nconst Users = bookshelf.Collection.extend({\r\n    model: User\r\n});\r\n\r\nconst Messages = bookshelf.Collection.extend({\r\n    model: Messages\r\n});\r\n\r\nconst Chats = bookshelf.Collection.extend({\r\n    model: Chats\r\n});\r\n\r\nconst TestTypes = bookshelf.Collection.extend({\r\n    model: TestType\r\n});\r\n\r\nmodule.exports = {\r\n    Message,\r\n    Messages,\r\n    User,\r\n    Users,\r\n    Chat,\r\n    Chats,\r\n    TestType,\r\n    TestTypes\r\n};"]}